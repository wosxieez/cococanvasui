!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.cocoui=i():t.cocoui=i()}(self,(function(){return(()=>{"use strict";var t={d:(i,e)=>{for(var a in e)t.o(e,a)&&!t.o(i,a)&&Object.defineProperty(i,a,{enumerable:!0,get:e[a]})},o:(t,i)=>Object.prototype.hasOwnProperty.call(t,i)},i={};function e(t,i){for(var e=0;e<i.length;e++){var a=i[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function a(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}t.d(i,{default:()=>y});var n=a((function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t)}));function l(t,i){for(var e=0;e<i.length;e++){var a=i[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var r=function(){function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.name="UIComponent",this._initialized=!1,this._application=null,this._x=0,this._y=0,this._width=100,this._height=100,this.children=[],this.invalidatePropertiesFlag=!1,this.invalidateDisplayListFlag=!1,this.invalidaetSkinFlag=!1,this.callLaterMethods=[]}var i,e;return i=t,e=[{key:"x",get:function(){return this._x},set:function(t){this._x!=t&&(this._x=t,this.invalidateDisplayList(),this.invalidateSkin())}},{key:"y",get:function(){return this._y},set:function(t){this._y!=t&&(this._y=t,this.invalidateDisplayList(),this.invalidateSkin())}},{key:"width",get:function(){return this._width},set:function(t){t=Math.ceil(t),this._width!=t&&(this._width=t,this.invalidateDisplayList(),this.invalidateSkin())}},{key:"height",get:function(){return this._height},set:function(t){t=Math.ceil(t),this._height!=t&&(this._height=t,this.invalidateDisplayList(),this.invalidateSkin())}},{key:"application",get:function(){return this._application},set:function(t){this._application!=t&&(this._application=t,this.pushCallLaterMethodsToApplicationCallLaterMethods(),this.setChildrenApplication())}},{key:"initialized",get:function(){return this._initialized}},{key:"initialize",value:function(){this._initialized||(this.createChildren(),this.invalidatePropertiesInLifeCycle(),this.invalidateDisplayListInLifeCycle(),this.invalidateSkinInLifeCycle(),this._initialized=!0)}},{key:"createChildren",value:function(){}},{key:"invalidatePropertiesInLifeCycle",value:function(){this.invalidatePropertiesFlag||(this.invalidatePropertiesFlag=!0,this.callLaterInLifeCycle(this.validateProperties,0).descript="[LifeCycle] validateProperties()")}},{key:"invalidateDisplayListInLifeCycle",value:function(){this.invalidateDisplayListFlag||(this.invalidateDisplayListFlag=!0,this.callLaterInLifeCycle(this.validateDisplayList,2).descript="[LifeCycle] validateDisplayList()")}},{key:"invalidateSkinInLifeCycle",value:function(){this.invalidaetSkinFlag||(this.invalidaetSkinFlag=!0,this.callLaterInLifeCycle(this.validateSkin,3).descript="[LifeCycle] validateSkin()")}},{key:"invalidateProperties",value:function(){!this.invalidatePropertiesFlag&&this._initialized&&(this.invalidatePropertiesFlag=!0,this.callLater(this.validateProperties).descript="validateProperties()")}},{key:"invalidateDisplayList",value:function(){!this.invalidateDisplayListFlag&&this._initialized&&(this.invalidateDisplayListFlag=!0,this.callLater(this.validateDisplayList).descript="validateDisplayList()")}},{key:"invalidateSkin",value:function(){!this.invalidaetSkinFlag&&this._initialized&&(this.invalidaetSkinFlag=!0,this.callLater(this.validateSkin).descript="validateSkin()")}},{key:"validateNow",value:function(){this.validateProperties(),this.validateSkin(),this.validateDisplayList()}},{key:"validateProperties",value:function(){this.invalidatePropertiesFlag&&(this.invalidatePropertiesFlag=!1,this.commitProperties())}},{key:"validateDisplayList",value:function(){this.invalidateDisplayListFlag&&(this.invalidateDisplayListFlag=!1,this.updateDisplayList())}},{key:"validateSkin",value:function(){this.invalidaetSkinFlag&&(this.invalidaetSkinFlag=!1,this.drawSkin())}},{key:"commitProperties",value:function(){}},{key:"updateDisplayList",value:function(){}},{key:"drawSkin",value:function(){}},{key:"setChildrenApplication",value:function(){for(var i=0;i<this.children.length;i++)this.children[i]instanceof t&&(t().application=application)}},{key:"callLater",value:function(t){var i=new n;i.method=t;for(var e=arguments.length,a=new Array(e>1?e-1:0),l=1;l<e;l++)a[l-1]=arguments[l];return i.args=a,i.caller=this,this.application?this.application.pushCallLaterMethodToApplicationCallLaterMethods(i):this.callLaterMethods.push(i),i}},{key:"callLaterInLifeCycle",value:function(t,i){var e=new n;e.method=t;for(var a=arguments.length,l=new Array(a>2?a-2:0),r=2;r<a;r++)l[r-2]=arguments[r];return e.args=l,e.caller=this,this.callLaterMethods.splice(i,0,e),e}},{key:"pushCallLaterMethodsToApplicationCallLaterMethods",value:function(){if(this.application)for(;this.callLaterMethods.length>0;)this.application.pushCallLaterMethodToApplicationCallLaterMethods(this.callLaterMethods.shift())}},{key:"addChild",value:function(i){return i instanceof t&&(this.children.push(i),i.initialize(),i.application=application),i}}],e&&l(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),t}();function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function s(t,i){for(var e=0;e<i.length;e++){var a=i[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function c(){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,i,e){var a=h(t,i);if(a){var n=Object.getOwnPropertyDescriptor(a,i);return n.get?n.get.call(arguments.length<3?t:e):n.value}},c.apply(this,arguments)}function h(t,i){for(;!Object.prototype.hasOwnProperty.call(t,i)&&null!==(t=f(t)););return t}function u(t,i){return u=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t},u(t,i)}function p(t,i){if(i&&("object"===o(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}var d=function(t){!function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),i&&u(t,i)}(r,t);var i,e,a,n,l=(a=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=f(a);if(n){var e=f(this).constructor;t=Reflect.construct(i,arguments,e)}else t=i.apply(this,arguments);return p(this,t)});function r(){var t;return function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,r),(t=l.call(this)).name="Application",t._width=800,t._height=600,t.invalidateCallLaterFlag=!1,t.rendererTotalTime=0,t}return i=r,e=[{key:"initialize",value:function(){c(f(r.prototype),"initialize",this).call(this),this.application=this}},{key:"addedChildcallLater",value:function(t){var i=new CallLaterMethod;i.method=t;for(var e=arguments.length,a=new Array(e>1?e-1:0),n=1;n<e;n++)a[n-1]=arguments[n];return i.args=a,i.caller=this,this.pushCallLaterMethodToApplicationCallLaterMethods(i),i}},{key:"pushCallLaterMethodToApplicationCallLaterMethods",value:function(t){this.callLaterMethods.push(t),this.invalidateCallLater()}},{key:"pushCallLaterMethodsToApplicationCallLaterMethods",value:function(){}},{key:"invalidateCallLater",value:function(){var t=this;this.initialized&&!this.invalidateCallLaterFlag&&(this.invalidateCallLaterFlag=!0,setTimeout((function(){t.validateCallLater()}),1e3))}},{key:"validateCallLater",value:function(){this.invalidateCallLaterFlag&&this.updateCallLater()}},{key:"updateCallLater",value:function(){if(console.log("updateCallLater"),0!=this.callLaterMethods.length){for(var t;this.callLaterMethods.length>0;)t=this.callLaterMethods.shift(),console.log(t.caller.name,t.descript),t.method.apply(t.caller,t.args);this.invalidateCallLaterFlag=!1}}}],e&&s(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),r}(r);const y={UIComponent:r,Application:d};return i.default})()}));
//# sourceMappingURL=cocoui.js.map